rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {

    // WARNING:
    // These rules are intentionally relaxed to make the app work
    // in this environment where server actions do not carry auth.
    // Do NOT use this configuration in a sensitive production app.

    // Participants – anyone can read/write
    match /participants/{participantId} {
      allow read: if true;
      allow write: if true;
    }

    // Staff members – anyone can read/write
    match /staff_members/{staffMemberId} {
      allow read: if true;
      allow write: if true;
    }

    // System schools
    match /system_schools/{schoolId} {
      allow read: if true;
      allow write: if true;
    }

    // System committees
    match /system_committees/{committeeId} {
      allow read: if true;
      allow write: if true;
    }

    // System staff teams
    match /system_staff_teams/{teamId} {
      allow read: if true;
      allow write: if true;
    }

    // System config – day switching, default statuses, logo, etc.
    match /system_config/{settingId} {
      allow read: if true;
      allow write: if true;
    }

    // Users collection – keep tighter: only owner can write,
    // but anyone can read their own doc.
    match /users/{userId} {
      allow read: if request.auth != null && request.auth.uid == userId;
      allow write: if false;
    }
  }
}

